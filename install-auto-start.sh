#!/bin/bash

# Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð´Ð»Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð·Ð°Ð¿ÑƒÑÐºÐ° Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ
# ÐÐ²Ñ‚Ð¾Ñ€: AI Assistant

echo "ðŸ”§ Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð·Ð°Ð¿ÑƒÑÐºÐ° Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ..."

# 1. Ð¡Ð´ÐµÐ»Ð°Ñ‚ÑŒ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¸ÑÐ¿Ð¾Ð»Ð½ÑÐµÐ¼Ñ‹Ð¼
chmod +x auto-start.sh

# 2. Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ systemd ÑÐµÑ€Ð²Ð¸Ñ
sudo tee /etc/systemd/system/todolist-auto-start.service > /dev/null << 'EOF'
[Unit]
Description=Auto Start Todolist Application
After=network.target
Wants=network.target

[Service]
Type=oneshot
User=root
WorkingDirectory=/var/www/eisenhower-matrix
ExecStart=/var/www/eisenhower-matrix/auto-start.sh
RemainAfterExit=yes
StandardOutput=journal
StandardError=journal
SyslogIdentifier=todolist-auto-start

[Install]
WantedBy=multi-user.target
EOF

# 3. Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ ÑÐµÑ€Ð²Ð¸Ñ
sudo systemctl daemon-reload
sudo systemctl enable todolist-auto-start.service

# 4. Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³ Ð´Ð»Ñ Ð»Ð¾Ð³Ð¾Ð² (ÐµÑÐ»Ð¸ Ð½Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚)
sudo mkdir -p /var/log/eisenhower-matrix
sudo chown www-data:www-data /var/log/eisenhower-matrix

echo ""
echo "âœ… ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð·Ð°Ð¿ÑƒÑÐº Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½!"
echo ""
echo "ðŸ“‹ ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð´Ð»Ñ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ:"
echo "   Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÑÐµÐ¹Ñ‡Ð°Ñ: sudo systemctl start todolist-auto-start"
echo "   ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ: sudo systemctl status todolist-auto-start"
echo "   ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð»Ð¾Ð³Ð¸: sudo journalctl -u todolist-auto-start -f"
echo "   ÐžÑ‚ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ: sudo systemctl disable todolist-auto-start"
echo ""
echo "ðŸš€ ÐŸÑ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð·Ð°Ð¿ÑƒÑÐºÐ°Ñ‚ÑŒÑÑ Ð¿Ð¾ÑÐ»Ðµ Ð¿ÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÑÐµÑ€Ð²ÐµÑ€Ð°!"
echo ""
